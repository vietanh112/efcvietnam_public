"use strict";(self.webpackChunkdashboard_hosting=self.webpackChunkdashboard_hosting||[]).push([[203],{1203:(Y,f,s)=>{s.r(f),s.d(f,{AuthModule:()=>J});var u=s(9808),r=s(2382),m=s(7152),h=s(9230),z=s(590),t=s(5e3),p=s(2520),x=s(3640),C=s(9590),l=s(4546),d=s(1894),A=s(2683),g=s(1047),v=s(6042),y=s(2643);function P(o,i){1&o&&(t.TgZ(0,"div",12),t._UZ(1,"nz-spin",13),t.qZA()),2&o&&(t.xp6(1),t.Q6J("nzSize","large"))}let Z=(()=>{class o{constructor(n,e,a,c){this.formBuilder=n,this.authenticationService=e,this.router=a,this.modal=c,this.loadingState=!1}ngOnInit(){this.loginForm=this.formBuilder.group({username:["",[r.kI.required,r.kI.minLength(4),r.kI.maxLength(30)]],password:["",[r.kI.required,r.kI.pattern("[A-Za-z0-9!@#$%^&*()+=_-]{4,30}")]]})}ngAfterViewInit(){}get f(){return this.loginForm.controls}submitForm(){this.loadingState=!0,this.authenticationService.login(this.f.username.value,this.f.password.value).pipe((0,z.P)()).subscribe(n=>{this.loadingState=!1;let e={message:"Success",method:"success"};return 200==n.code&&1==n.status?(this.notification(e),void setTimeout(()=>{this.router.navigate(["admin","certificate"])},1001)):200!=n.code&&0==n.status?(e.message=n.message,e.method="error",this.f.password.reset(),this.notification(e)):void 0})}notification(n){let e=n.method;this.modal[e]({nzWidth:350,nzOkText:null,nzTitle:`Login ${e}`,nzContent:`${n.message}`,nzStyle:{position:"absolute",bottom:"0px",right:"20px",top:"auto"}}),setTimeout(()=>{this.modal.closeAll()},1500)}checkFormValid(){return!this.loginForm.valid}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(r.qu),t.Y36(p.$),t.Y36(m.F0),t.Y36(x.Sf))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-auth-login"]],decls:16,vars:4,consts:[["class","style-loading",4,"ngIf"],[1,"form-style"],[1,"text-center"],["nz-form","",1,"login-form",3,"formGroup","ngSubmit"],["nzErrorTip","Please input your username!"],["nzPrefixIcon","user"],["type","text","nz-input","","formControlName","username","placeholder","Username"],["nzErrorTip","Please input your Password!"],["nzPrefixIcon","lock"],["type","password","nz-input","","formControlName","password","placeholder","Password"],["nz-button","",1,"login-form-button","login-form-margin",3,"nzType","disabled"],[2,"display","flex","justify-content","space-between"],[1,"style-loading"],["nzSimple","",3,"nzSize"]],template:function(n,e){1&n&&(t.YNc(0,P,2,1,"div",0),t.TgZ(1,"div",1)(2,"h2",2),t._uU(3," \u0110\u0103ng nh\u1eadp "),t.qZA(),t.TgZ(4,"form",3),t.NdJ("ngSubmit",function(){return e.submitForm()}),t.TgZ(5,"nz-form-item")(6,"nz-form-control",4)(7,"nz-input-group",5),t._UZ(8,"input",6),t.qZA()()(),t.TgZ(9,"nz-form-item")(10,"nz-form-control",7)(11,"nz-input-group",8),t._UZ(12,"input",9),t.qZA()()(),t.TgZ(13,"button",10),t._uU(14,"\u0110\u0103ng nh\u1eadp"),t.qZA(),t._UZ(15,"div",11),t.qZA()()),2&n&&(t.Q6J("ngIf",e.loadingState),t.xp6(4),t.Q6J("formGroup",e.loginForm),t.xp6(9),t.Q6J("nzType","primary")("disabled",e.checkFormValid()))},directives:[u.O5,C.W,r._Y,r.JL,l.Lr,r.sg,d.SK,l.Nx,d.t3,l.Fd,A.w,g.gB,g.Zp,r.Fj,r.JJ,r.u,v.ix,y.dQ],styles:[".login-form[_ngcontent-%COMP%]{max-width:300px}.login-form-margin[_ngcontent-%COMP%]{margin-bottom:16px}.login-form-forgot[_ngcontent-%COMP%]{float:right}.login-form-button[_ngcontent-%COMP%]{width:100%}.form-style[_ngcontent-%COMP%]{position:fixed;left:50%;top:50%;transform:translate(-50%,-50%);padding:25px 40px 35px;border:1px solid #d0d0d0;box-shadow:0 0 10px #d0d0d0;border-radius:20px}.form-style[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:260px}.form-style[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:15px;font-size:1.25rem}@media screen and (max-width: 414px){.login-form[_ngcontent-%COMP%]{max-width:initial}.form-style[_ngcontent-%COMP%]{left:15px;right:15px;transform:translateY(-50%);width:calc(100% - 30px);padding:20px 30px 25px}.form-style[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}}"]}),o})(),T=(()=>{class o{constructor(n,e){this.authenticationService=n,this.router=e}ngOnInit(){this.authenticationService.logout(),this.router.navigate(["/admin"])}ngAfterViewInit(){}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(p.$),t.Y36(m.F0))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-auth-logout"]],decls:0,vars:0,template:function(n,e){},styles:[""]}),o})();var w=s(8054);function S(o,i){1&o&&(t.TgZ(0,"div",19),t._UZ(1,"nz-spin",20),t.qZA()),2&o&&(t.xp6(1),t.Q6J("nzSize","large"))}function M(o,i){if(1&o&&t._UZ(0,"nz-option",21),2&o){const n=i.$implicit;t.Q6J("nzValue",n.id)("nzLabel",n.name)}}const O=function(){return["/admin","certificate"]},L=[{path:"login",component:Z},{path:"logout",component:T,canActivate:[h.a]},{path:"register",component:(()=>{class o{constructor(n,e,a,c){this.formBuilder=n,this.authenticationService=e,this.router=a,this.modal=c,this.loadingState=!1,this.currentUser=void 0,this.listRole=[{id:"1",name:"SuperAdmin"},{id:"2",name:"Admin"},{id:"3",name:"User"}]}ngOnInit(){this.registerForm=this.formBuilder.group({email:["",[r.kI.required,r.kI.pattern("[a-z0-9](.?[a-z0-9]){3,}@[a-zA-Z0-9.]{2,30}")]],username:["",[r.kI.required,r.kI.minLength(4),r.kI.maxLength(30)]],password:["",[r.kI.required,r.kI.pattern("[A-Za-z0-9!@#$%^&*()-_+=]{4,20}")]],confirmPassword:["",[r.kI.required,r.kI.pattern("[A-Za-z0-9!@#$%^&*()-_+=]{4,20}")]],role:["3",[r.kI.required]]})}ngAfterViewInit(){this.getCurrentUser(),1!=this.currentUser.roleId&&(localStorage.removeItem("currentUser"),this.router.navigate(["auth","login"]))}get f(){return this.registerForm.controls}getCurrentUser(){localStorage.getItem("currentUser")&&(this.currentUser=this.authenticationService.currentUserValue)}submitForm(){this.loadingState=!0;let n={message:"Success",method:"success",data:"",time:1500},e={email:this.f.email.value,username:this.f.username.value,password:this.f.password.value,role:this.f.role.value};if(this.f.password.value!=this.f.confirmPassword.value)return n.method="warning",n.message="Error",n.data="Password and Confirm password not match",this.f.password.reset(),this.f.confirmPassword.reset(),this.loadingState=!1,this.notification(n);this.authenticationService.register(e).pipe((0,z.P)()).subscribe(a=>(this.loadingState=!1,201==a.code?(n.message="Error",n.method="warning",n.data=a.message):200!=a.code?(n.message="Error",n.method="error",n.data=a.message):(n.data=a.data,this.registerForm.reset()),this.f.password.reset(),this.f.confirmPassword.reset(),this.notification(n)))}notification(n){this.modal[n.method]({nzWidth:350,nzOkText:null,nzTitle:`${n.message} Register`,nzContent:`${n.data}`,nzStyle:{position:"absolute",bottom:"0px",right:"20px",top:"auto"}}),setTimeout(()=>{this.modal.closeAll()},n.time)}checkFormValid(){return!this.registerForm.valid}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(r.qu),t.Y36(p.$),t.Y36(m.F0),t.Y36(x.Sf))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-auth-register"]],decls:29,vars:8,consts:[["class","style-loading",4,"ngIf"],[1,"form-style"],[1,"text-center"],["nz-form","",1,"register-form",3,"formGroup","ngSubmit"],["nzErrorTip","Email not validated!"],["nzPrefixIcon","mail"],["type","text","nz-input","","formControlName","email","placeholder","Email"],["nzErrorTip","Username not validated!"],["nzPrefixIcon","user"],["type","text","nz-input","","formControlName","username","placeholder","Username"],["nzErrorTip","Password not validated!"],["nzPrefixIcon","lock"],["type","password","nz-input","","formControlName","password","placeholder","Password"],["nzErrorTip","Confirm password not validated!"],["type","password","nz-input","","formControlName","confirmPassword","placeholder","Confirm password"],["formControlName","role",2,"width","100%"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],["nz-button","",1,"login-form-button","login-form-margin",3,"nzType","disabled"],["nz-button","",1,"login-form-button","login-form-margin",3,"routerLink","nzType"],[1,"style-loading"],["nzSimple","",3,"nzSize"],[3,"nzValue","nzLabel"]],template:function(n,e){1&n&&(t.YNc(0,S,2,1,"div",0),t.TgZ(1,"div",1)(2,"h2",2),t._uU(3," \u0110\u0103ng k\xed "),t.qZA(),t.TgZ(4,"form",3),t.NdJ("ngSubmit",function(){return e.submitForm()}),t.TgZ(5,"nz-form-item")(6,"nz-form-control",4)(7,"nz-input-group",5),t._UZ(8,"input",6),t.qZA()()(),t.TgZ(9,"nz-form-item")(10,"nz-form-control",7)(11,"nz-input-group",8),t._UZ(12,"input",9),t.qZA()()(),t.TgZ(13,"nz-form-item")(14,"nz-form-control",10)(15,"nz-input-group",11),t._UZ(16,"input",12),t.qZA()()(),t.TgZ(17,"nz-form-item")(18,"nz-form-control",13)(19,"nz-input-group",11),t._UZ(20,"input",14),t.qZA()()(),t.TgZ(21,"nz-form-item")(22,"nz-form-control",13)(23,"nz-select",15),t.YNc(24,M,1,2,"nz-option",16),t.qZA()()(),t.TgZ(25,"button",17),t._uU(26,"\u0110\u0103ng k\xed"),t.qZA(),t.TgZ(27,"button",18),t._uU(28,"Quay l\u1ea1i Admin"),t.qZA()()()),2&n&&(t.Q6J("ngIf",e.loadingState),t.xp6(4),t.Q6J("formGroup",e.registerForm),t.xp6(20),t.Q6J("ngForOf",e.listRole),t.xp6(1),t.Q6J("nzType","primary")("disabled",e.checkFormValid()),t.xp6(2),t.Q6J("routerLink",t.DdM(7,O))("nzType","primary"))},directives:[u.O5,C.W,r._Y,r.JL,l.Lr,r.sg,d.SK,l.Nx,d.t3,l.Fd,A.w,g.gB,g.Zp,r.Fj,r.JJ,r.u,w.Vq,u.sg,w.Ip,v.ix,y.dQ,m.rH],styles:[".register-form[_ngcontent-%COMP%]{max-width:300px}.register-form-margin[_ngcontent-%COMP%]{margin-bottom:16px}.register-form-forgot[_ngcontent-%COMP%]{float:right}.login-form-button[_ngcontent-%COMP%]{width:100%}.form-style[_ngcontent-%COMP%]{position:fixed;left:50%;top:50%;transform:translate(-50%,-50%);padding:25px 40px 35px;border:1px solid #d0d0d0;box-shadow:0 0 10px #d0d0d0;border-radius:20px}.form-style[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:260px}.form-style[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:15px;font-size:1.25rem}.form-style[_ngcontent-%COMP%]   .login-form-button[_ngcontent-%COMP%]{margin-bottom:16px}@media screen and (max-width: 414px){.login-form[_ngcontent-%COMP%]{max-width:initial}.form-style[_ngcontent-%COMP%]{left:15px;right:15px;transform:translateY(-50%);width:calc(100% - 30px);padding:20px 30px 25px}.form-style[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}}"]}),o})(),canActivate:[h.a]},{path:"forgot-password",component:(()=>{class o{constructor(){}ngOnInit(){}ngAfterViewInit(){}}return o.\u0275fac=function(n){return new(n||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-auth-forgot-password"]],decls:0,vars:0,template:function(n,e){},styles:[""]}),o})()},{path:"manage",component:(()=>{class o{constructor(){}ngOnInit(){}ngAfterViewInit(){}}return o.\u0275fac=function(n){return new(n||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-core-manage-list"]],decls:0,vars:0,template:function(n,e){},styles:[""]}),o})()}];let U=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[u.ez,m.Bz.forChild(L)],m.Bz]}),o})();var _=s(7130);let J=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({providers:[],imports:[[_.h,u.ez,r.u5,r.UX,U]]}),o})()}}]);